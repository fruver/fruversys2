import React from 'react';
import PropTypes from 'prop-types';

import {createStyles, makeStyles} from '@material-ui/core/styles';
import MUISnackbarContent from '@material-ui/core/SnackbarContent';
import MUIIconButton from '@material-ui/core/IconButton';

import {FontAwesomeIcon as Icon} from '@fortawesome/react-fontawesome';
import {faExclamation} from '@fortawesome/pro-duotone-svg-icons';

import LayoutBase from './LayoutBase';
import {SpinnerLinear} from '../Spinner';

const useStyles = makeStyles((theme) =>
  createStyles({
    root: {
      width: '100%',
      marginTop: theme.spacing(3)
    },
    snackbarContentError: {
      backgroundColor: theme.palette.error.dark,
      padding: theme.spacing(2),
    },
    snackbarContentIcon: {
      opacity: 0.9,
      marginRight: theme.spacing(1)
    },
    snackbarContentMessage: {
      display: 'flex',
      alignItems: 'center'
    }
  })
);

const Layout = ({
  title,
  isLoading,
  isError,
  children
}) => {
  const classes = useStyles();

  if (isLoading) {
    return (
      <LayoutBase title={title}>
        <SpinnerLinear />
      </LayoutBase>
    );
  }

  if (isError) {
    return (
      <LayoutBase title={title}>
        <MUISnackbarContent
          className={classes.snackbarContentError}
          message={
            <span className={classes.snackbarContentMessage}>
              <MUIIconButton className={classes.snackbarContentIcon}>
                <Icon icon={faExclamation} />
              </MUIIconButton>
              Ups! a ocurrido un error, si el problema persiste
              por favor contacta al equipo de soporte.
            </span>
          }
        />
      </LayoutBase>
    );
  }

  return (
    <LayoutBase title={title}>
      {children}
    </LayoutBase>
  );
};

Layout.propTypes = {
  title: PropTypes.string,
  isLoading: PropTypes.bool,
  isError: PropTypes.bool,
  children: PropTypes.element
};

export default Layout;